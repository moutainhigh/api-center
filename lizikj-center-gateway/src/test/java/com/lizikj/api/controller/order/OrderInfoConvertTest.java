package com.lizikj.api.controller.order;

import com.alibaba.fastjson.JSON;
import com.lizikj.api.vo.order.OrderInfoVO;
import com.lizikj.common.util.ObjectConvertUtil;
import com.lizikj.order.dto.OrderInfoDTO;
import com.lizikj.order.dto.OrderItemDTO;
import net.minidev.json.JSONUtil;
import org.junit.Test;

import java.util.ArrayList;
import java.util.List;

/**
 * @author Michael.Huang
 * @date 2017/9/19 20:42
 */
public class OrderInfoConvertTest {

    @Test
    public void testConvertOrderInfo(){
        OrderInfoDTO dto = new OrderInfoDTO();
        dto.setShopId(11l);

        OrderItemDTO orderItemDTO = new OrderItemDTO();
        orderItemDTO.setOrderId(1l);

        List<OrderItemDTO> ls = new ArrayList();
        ls.add(orderItemDTO);
        dto.setOrderItems(ls);

        OrderInfoVO vo = ObjectConvertUtil.map(dto, OrderInfoVO.class);

//        String s = "{\"areaDeskId\":1,\"benefitAmount\":0,\"closeStatus\":\"OPENED\",\"costAmount\":0,\"createTime\":1505825506554,\"invoiceStatus\":\"NO\",\"needAmount\":157,\"orderBizType\":\"MERCHANDISE\",\"orderItems\":[{\"costAmount\":0,\"goodsId\":\"100\",\"goodsName\":\"收费1\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"FEE_CUSTOM\",\"itemType\":\"FEE\",\"merchantId\":1,\"operationType\":\"NONE\",\"orderItemAttr\":\"null\",\"orderSource\":\"H5\",\"packStatus\":\"UN_PACK\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":8,\"sellVolume\":1,\"shopId\":1,\"skuId\":-999910,\"totalAmount\":8,\"weightStatus\":\"NO\"},{\"costAmount\":0,\"goodsId\":\"127\",\"goodsName\":\"阿奴\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"FEE_CUSTOM\",\"itemType\":\"FEE\",\"merchantId\":1,\"operationType\":\"NONE\",\"orderItemAttr\":\"null\",\"orderSource\":\"H5\",\"packStatus\":\"UN_PACK\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":9,\"sellVolume\":1,\"shopId\":1,\"skuId\":-999910,\"totalAmount\":9,\"weightStatus\":\"NO\"},{\"costAmount\":0,\"goodsId\":\"131\",\"goodsName\":\"按人头来\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"FEE_CUSTOM\",\"itemType\":\"FEE\",\"merchantId\":1,\"operationType\":\"NONE\",\"orderItemAttr\":\"null\",\"orderSource\":\"H5\",\"packStatus\":\"UN_PACK\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":20,\"sellVolume\":1,\"shopId\":1,\"skuId\":-999910,\"totalAmount\":20,\"weightStatus\":\"NO\"},{\"costAmount\":0,\"goodsId\":\"132\",\"goodsName\":\"回来了\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"FEE_CUSTOM\",\"itemType\":\"FEE\",\"merchantId\":1,\"operationType\":\"NONE\",\"orderItemAttr\":\"null\",\"orderSource\":\"H5\",\"packStatus\":\"UN_PACK\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":0,\"sellVolume\":1,\"shopId\":1,\"skuId\":-999910,\"totalAmount\":0,\"weightStatus\":\"NO\"},{\"costAmount\":0,\"goodsId\":\"137\",\"goodsName\":\"自定义费用1\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"FEE_CUSTOM\",\"itemType\":\"FEE\",\"merchantId\":1,\"operationType\":\"NONE\",\"orderItemAttr\":\"null\",\"orderSource\":\"H5\",\"packStatus\":\"UN_PACK\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":20,\"sellVolume\":1,\"shopId\":1,\"skuId\":-999910,\"totalAmount\":20,\"weightStatus\":\"NO\"},{\"costAmount\":0,\"goodsId\":\"246\",\"goodsName\":\"vv1\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"FEE_CUSTOM\",\"itemType\":\"FEE\",\"merchantId\":1,\"operationType\":\"NONE\",\"orderItemAttr\":\"null\",\"orderSource\":\"H5\",\"packStatus\":\"UN_PACK\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":100,\"sellVolume\":1,\"shopId\":1,\"skuId\":-999910,\"totalAmount\":100,\"weightStatus\":\"NO\"}],\"orderSource\":\"H5\",\"orderStatus\":\"WAIT_PAY\",\"orderType\":\"PAY_FIRST\",\"packStatus\":\"PACK\",\"payAmount\":157,\"payStatus\":\"UN_PAY\",\"peoples\":2,\"refundStatus\":\"NORMAL\",\"remark\":\"\",\"removeStatus\":\"UN_REMOVED\",\"sort\":\"141\",\"totalAmount\":157,\"wait4Serving\":false}\n";

        String s = "{\"areaDeskId\":0,\"areaDeskName\":\"小明桌台之1\",\"benefitAmount\":6750,\"closeStatus\":\"CLOSED\",\"costAmount\":0,\"createTime\":1507968089000,\"customDeskNumber\":\"\",\"cutPriceFlag\":\"UNABLE\",\"invoiceStatus\":\"NO\",\"memberId\":0,\"merchantId\":1119,\"merchantMemberId\":96,\"minCutAmount\":0,\"mobile\":\"\",\"needAmount\":43452,\"orderBizType\":\"MERCHANDISE\",\"orderDiscounts\":[{\"benefitAmount\":6750,\"name\":\"MEMBER_DIS\",\"orderId\":1,\"orderNo\":\"D2017101416012907963116689\",\"payVersion\":1507973168118,\"removeStatus\":\"UN_REMOVED\",\"shopId\":1120,\"status\":\"DOING\",\"type\":\"MEMBER_DIS\"}],\"orderId\":1,\"orderItems\":[{\"appendDishStatus\":false,\"cutPriceFlag\":\"UNABLE\",\"itemLevel\":\"LEVEL_1\",\"operationType\":\"REMOVE\",\"orderItemId\":1,\"packStatus\":\"UN_PACK\",\"removeStatus\":\"REMOVED\",\"weightStatus\":\"NO\"},{\"appendDishStatus\":false,\"cutPriceFlag\":\"UNABLE\",\"itemLevel\":\"LEVEL_1\",\"operationType\":\"REMOVE\",\"orderItemId\":2,\"packStatus\":\"UN_PACK\",\"removeStatus\":\"REMOVED\",\"weightStatus\":\"NO\"},{\"appendDishStatus\":false,\"cutPriceFlag\":\"UNABLE\",\"itemLevel\":\"LEVEL_1\",\"operationType\":\"REMOVE\",\"orderItemId\":3,\"packStatus\":\"UN_PACK\",\"removeStatus\":\"REMOVED\",\"weightStatus\":\"NO\"},{\"appendDishStatus\":false,\"costAmount\":0,\"cutPriceFlag\":\"UNABLE\",\"goodsId\":\"7965\",\"goodsName\":\"茶位费\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"FEE_TEA\",\"itemType\":\"FEE\",\"merchantId\":1119,\"operationType\":\"NONE\",\"orderId\":1,\"orderNo\":\"D2017101416012907963116689\",\"orderSource\":\"POS\",\"packStatus\":\"UN_PACK\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":0,\"sellPrice\":0,\"sellVolume\":1,\"shopId\":1120,\"skuId\":-999909,\"totalAmount\":0,\"unit\":\"2\",\"weightStatus\":\"NO\"},{\"appendDishStatus\":false,\"costAmount\":0,\"cutPriceFlag\":\"UNABLE\",\"goodsId\":\"23978\",\"goodsName\":\"嚯嚯嚯\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"FEE_CUSTOM\",\"itemType\":\"FEE\",\"merchantId\":1119,\"operationType\":\"NONE\",\"orderId\":1,\"orderNo\":\"D2017101416012907963116689\",\"orderSource\":\"POS\",\"packStatus\":\"UN_PACK\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":1,\"sellPrice\":1,\"sellVolume\":1,\"shopId\":1120,\"skuId\":-999910,\"totalAmount\":1,\"unit\":\"1\",\"weightStatus\":\"NO\"},{\"appendDishStatus\":false,\"costAmount\":0,\"cutPriceFlag\":\"UNABLE\",\"goodsId\":\"23979\",\"goodsName\":\"嚯嚯霍\\n嚯\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"FEE_CUSTOM\",\"itemType\":\"FEE\",\"merchantId\":1119,\"operationType\":\"NONE\",\"orderId\":1,\"orderNo\":\"D2017101416012907963116689\",\"orderSource\":\"POS\",\"packStatus\":\"UN_PACK\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":1,\"sellPrice\":1,\"sellVolume\":1,\"shopId\":1120,\"skuId\":-999910,\"totalAmount\":1,\"unit\":\"1\",\"weightStatus\":\"NO\"},{\"appendDishStatus\":true,\"benefitAmount\":0,\"costAmount\":0,\"createTime\":1507968246000,\"cutPriceFlag\":\"UNABLE\",\"goodsId\":\"59ded44c340c1911c56bb01a\",\"goodsName\":\"普通二\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"NORMAL\",\"itemType\":\"NORMAL\",\"memberPrice\":0,\"merchandiseVersion\":1507775564305,\"merchantId\":1119,\"operationType\":\"NONE\",\"orderId\":1,\"orderItemAttr\":\"[]\",\"orderItemId\":4,\"orderNo\":\"D2017101416012907963116689\",\"orderSource\":\"POS\",\"orderVersion\":1507968089079,\"packStatus\":\"UN_PACK\",\"parentOrderItemId\":0,\"remark\":\"\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":0,\"sellPrice\":200,\"sellVolume\":1,\"shopId\":1120,\"skuId\":3674,\"totalAmount\":200,\"unit\":\"份\",\"updateTime\":1507968246000,\"weight\":0,\"weightStatus\":\"NO\"},{\"appendDishStatus\":true,\"benefitAmount\":0,\"costAmount\":0,\"createTime\":1507968246000,\"cutPriceFlag\":\"UNABLE\",\"goodsId\":\"59df178fe1f30106041083a5\",\"goodsName\":\"ceee\",\"itemLevel\":\"LEVEL_1\",\"itemSubType\":\"NORMAL\",\"itemType\":\"NORMAL\",\"memberPrice\":45000,\"merchandiseVersion\":1507792783508,\"merchantId\":1119,\"operationType\":\"NONE\",\"orderId\":1,\"orderItemAttr\":\"[]\",\"orderItemId\":5,\"orderNo\":\"D2017101416012907963116689\",\"orderSource\":\"POS\",\"orderVersion\":1507968089079,\"packStatus\":\"UN_PACK\",\"parentOrderItemId\":0,\"remark\":\"\",\"removeStatus\":\"UN_REMOVED\",\"saleAmount\":0,\"sellPrice\":50000,\"sellVolume\":1,\"shopId\":1120,\"skuId\":3686,\"totalAmount\":50000,\"unit\":\"\",\"updateTime\":1507968246000,\"weight\":0,\"weightStatus\":\"NO\"}],\"orderNo\":\"D2017101416012907963116689\",\"orderPersonId\":2293,\"orderSource\":\"POS\",\"orderStatus\":\"WAIT_PAY\",\"orderTime\":1507968089000,\"orderType\":\"EAT_FIRST\",\"packStatus\":\"UN_PACK\",\"payAmount\":0,\"payStatus\":\"UN_PAY\",\"peoples\":-1,\"refundAmount\":0,\"refundStatus\":\"NORMAL\",\"removeStatus\":\"UN_REMOVED\",\"shopId\":1120,\"snNum\":\"N9NL10087248\",\"sort\":\"8\",\"totalAmount\":50202,\"updateTime\":1507968246000,\"userId\":0,\"wait4Serving\":false}";
        OrderInfoDTO t = JSON.parseObject(s,OrderInfoDTO.class);

        vo = ObjectConvertUtil.map(t, OrderInfoVO.class);
        System.out.println(vo);

    }
}
